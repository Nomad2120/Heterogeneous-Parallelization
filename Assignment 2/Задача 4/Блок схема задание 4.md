```mermaid
flowchart TD
    A(start) --> B(srand_time)
    B --> C(test_size_10000)
    C --> D(test_size_100000)
    D --> E(return_0)

    %% test_size(n)
    C --> C1(allocate_arr_cpu)
    C1 --> C2(fill_random_numbers)
    C2 --> C3(cudaMalloc_d_arr)
    C3 --> C4(cudaMemcpy_H2D)
    C4 --> C5(set_block_size_256)
    C5 --> C6(calc_blocks_count)
    C6 --> C7(start_timer)

    %% GPU part
    C7 --> G1(kernel_sort_block_launch)
    G1 --> G2(cudaDeviceSynchronize)

    %% Back to CPU + merge
    G2 --> H1(cudaMemcpy_D2H)
    H1 --> H2(call_merge_cpu)

    %% merge_cpu(arr,n,block_size)
    H2 --> M1(loop_size_doubles)
    M1 --> M2(loop_left_pairs)
    M2 --> M3(calc_mid_right)
    M3 --> M4(check_second_block_exists)
    M4 --> M5(allocate_temp)
    M5 --> M6(merge_two_sorted_parts)
    M6 --> M7(copy_back_to_arr)
    M7 --> M8(delete_temp)
    M8 --> M2
    M2 --> M1

    %% finish test_size
    H2 --> C8(end_timer)
    C8 --> C9(calc_time_ms)
    C9 --> C10(print_result)
    C10 --> C11(cudaFree_d_arr)
    C11 --> C12(delete_arr_cpu)
    C12 --> C13(return_from_test_size)

    %% kernel sort_block(data,n,block_size) internal
    G1 --> K1(compute_bid_start_end)
    K1 --> K2(adjust_end_if_needed)
    K2 --> K3(bubble_sort_loops_in_block)
    K3 --> G2
